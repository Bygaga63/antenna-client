(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{163:function(e,t,a){e.exports=a(233)},168:function(e,t,a){},169:function(e,t,a){},233:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),s=a(23),o=a.n(s),l=(a(168),a(10)),c=a(11),i=a(13),u=a(12),m=a(14),d=(a(169),a(239)),p=a(17),h=a(8),f=a.n(h),v=a(19),E=a(16),b=a.n(E),g={setJWTToken:function(e){console.log("setJWTToken"),e?(b.a.defaults.headers.common.Authorization=e,null!==localStorage.jwtToken&&void 0!==localStorage.jwtToken||(localStorage.setItem("jwtToken",e),console.log("setJWTToken",e))):delete b.a.defaults.headers.common.Authorization}},y=a(76),N=a.n(y),k=function(){return function(e){localStorage.removeItem("jwtToken"),g.setJWTToken(!1),e({type:"SET_CURRENT_USER",payload:{}})}},O=a(42),w=Object(O.a)({}),T=function(e){function t(){return Object(l.a)(this,t),Object(i.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(c.a)(t,[{key:"logout",value:function(){this.props.logout(),w.push("/")}},{key:"render",value:function(){var e,t=this.props.security,a=t.validToken,n=t.user,s=r.a.createElement("div",{className:"collapse navbar-collapse",id:"mobile-nav"},r.a.createElement("ul",{className:"navbar-nav mr-auto"},r.a.createElement("li",{className:"nav-item"},r.a.createElement(d.a,{className:"nav-link",to:"/dashboard"},"\u0417\u0430\u044f\u0432\u043a\u0438")),r.a.createElement("li",{className:"nav-item"},r.a.createElement(d.a,{className:"nav-link",to:"/dashboard/closed"},"\u0417\u0430\u043a\u0440\u044b\u0442\u044b\u0435 \u0437\u0430\u044f\u0432\u043a\u0438"))),r.a.createElement("ul",{className:"navbar-nav ml-auto"},r.a.createElement("li",{className:"nav-item"},r.a.createElement(d.a,{className:"nav-link",to:"/dashboard"},r.a.createElement("i",{className:"fas fa-user-circle mr-1"}),n.fullName)),"USER"!==n.role&&r.a.createElement("li",{className:"nav-item"},r.a.createElement(d.a,{className:"nav-link",to:"/settings"},r.a.createElement("i",{className:"fa fa-cogs mr-1"}),"\u041d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0438")),r.a.createElement("li",{className:"nav-item"},r.a.createElement(d.a,{className:"nav-link",to:"/logout",onClick:this.logout.bind(this)},"\u0412\u044b\u0445\u043e\u0434")))),o=r.a.createElement("div",{className:"collapse navbar-collapse",id:"mobile-nav"},r.a.createElement("ul",{className:"navbar-nav ml-auto"},r.a.createElement("li",{className:"nav-item"}),r.a.createElement("li",{className:"nav-item"},r.a.createElement(d.a,{className:"nav-link",to:"/login"},"\u0412\u043e\u0439\u0442\u0438"))));return e=a&&n?s:o,r.a.createElement("nav",{className:"navbar navbar-expand-sm navbar-dark bg-primary mb-4"},r.a.createElement("div",{className:"container"},r.a.createElement(d.a,{className:"navbar-brand",to:"/"},"\u0410\u043d\u0442\u0435\u043d\u043d\u0430\u044f \u0441\u043b\u0443\u0436\u0431\u0430"),r.a.createElement("button",{className:"navbar-toggler",type:"button","data-toggle":"collapse","data-target":"#mobile-nav"},r.a.createElement("span",{className:"navbar-toggler-icon"})),e))}}]),t}(n.Component),C=Object(p.b)(function(e){return{security:e.security}},{logout:k})(T),j=(a(194),a(250)),S=a(253),R=a(252),D=a(36),x=a(135),A={},_=a(51),U={validToken:!1,user:{}},M=[],P=a(55),I=[],B=[],W=[],G=[],F=Object(D.c)({errors:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:A,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"GET_ERRORS":return t.payload;default:return e}},reports:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:G,t=arguments.length>1?arguments[1]:void 0,a=t.type,n=t.payload;switch(a){case"GET_REPORT":return n;default:return e}},tasks:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:W,t=arguments.length>1?arguments[1]:void 0,a=t.type,n=t.payload;switch(a){case"GET_TASK_LIST":return n;case"GET_TASK":return e.find(function(e){return e.id===n.id})?e.map(function(e){return e.id===n.id?n:e}):[].concat(Object(P.a)(e),[n]);case"ADD_TASK":return[].concat(Object(P.a)(e),[n]);case"UPDATE_TASK":return e.map(function(e){return e.id===n.id?n:e});default:return e}},users:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:M,t=arguments.length>1?arguments[1]:void 0,a=t.type,n=t.payload;switch(a){case"GET_USERS":return n;case"EDIT_USER":return e.map(function(e){return e.id===n.id?n:e});case"REMOVE_USER":return e.filter(function(e){return e.id!==n.id});default:return e}},breakdownType:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:I,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"GET_BREAKDOWN_TYPES":return t.payload;case"ADD_BREAKDOWN_TYPE":return[].concat(Object(P.a)(e),[t.payload]);case"REMOVE_BREAKDOWN_TYPE":return e.filter(function(e){return e.id!==t.payload.id});default:return e}},area:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:B,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"GET_AREAS":return t.payload;case"ADD_AREA":return[].concat(Object(P.a)(e),[t.payload]);case"REMOVE_AREA":return e.filter(function(e){return e.id!==t.payload.id});default:return e}},security:function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:U,a=arguments.length>1?arguments[1]:void 0;switch(a.type){case"SET_CURRENT_USER":return Object(_.a)({},t,{validToken:(e=a.payload,!!e),user:a.payload});default:return t}}}),L={},K=[x.a],V=window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__(),H=window.navigator.userAgent.includes("Chrome")&&V?Object(D.e)(F,L,Object(D.d)(D.a.apply(void 0,K),V)):Object(D.e)(F,L,Object(D.d)(D.a.apply(void 0,K))),J=function(e){function t(){return Object(l.a)(this,t),Object(i.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){this.props.security.validToken&&this.props.history.push("/dashboard")}},{key:"render",value:function(){return r.a.createElement("div",{className:"landing"},r.a.createElement("div",{className:"light-overlay landing-inner text-dark"},r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-md-12 text-center"},r.a.createElement("h1",{className:"display-3 mb-4"},"\u041f\u0440\u0438\u0435\u043c \u0437\u0430\u044f\u0432\u043e\u043a"),r.a.createElement("p",{className:"lead"},"\u0421\u043e\u0437\u0434\u0430\u0435\u0442\u0435 \u0443\u0447\u0435\u0442\u043d\u0443\u044e \u0437\u0430\u043f\u0438\u0441\u044c \u0438 \u043f\u0440\u0438\u0441\u0442\u0443\u043f\u0430\u0439\u0442\u0435 \u043a \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044e \u0437\u0430\u044f\u0432\u043e\u043a"),r.a.createElement("hr",null),r.a.createElement(d.a,{className:"btn btn-lg btn-secondary mr-2",to:"/login"},"\u0412\u043e\u0439\u0442\u0438"))))))}}]),t}(n.Component),Y=Object(p.b)(function(e){return{security:e.security}})(J),z=a(27),q=a(24),X=a(4),Q=a.n(X),$=function(e){function t(){var e;return Object(l.a)(this,t),(e=Object(i.a)(this,Object(u.a)(t).call(this))).state={username:"",fullName:"",password:"",confirmPassword:"",role:"USER",errors:{}},e.onChange=e.onChange.bind(Object(q.a)(e)),e.onSubmit=e.onSubmit.bind(Object(q.a)(e)),e}return Object(m.a)(t,e),Object(c.a)(t,[{key:"componentWillReceiveProps",value:function(e){e.errors&&this.setState({errors:e.errors})}},{key:"onSubmit",value:function(e){e.preventDefault();var t={username:this.state.username,fullName:this.state.fullName,password:this.state.password,confirmPassword:this.state.confirmPassword,role:this.state.role};this.props.createNewUser(t,this.props.history)}},{key:"onChange",value:function(e){if(this.state.errors[e.target.name]){var t=Object(_.a)({},this.state.errors);t[e.target.name]="",this.setState({errors:t})}this.setState(Object(z.a)({},e.target.name,e.target.value))}},{key:"render",value:function(){var e=this.state.errors;return r.a.createElement("div",{className:"register"},r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-md-8 m-auto"},r.a.createElement(d.a,{to:"/settings",className:"btn btn-light"},"\u041d\u0430\u0437\u0430\u0434 \u043a \u043d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0430\u043c"),r.a.createElement("h1",{className:"display-4 text-center"},"\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f"),r.a.createElement("p",{className:"lead text-center"},"\u0421\u043e\u0437\u0434\u0430\u0442\u044c \u0430\u043a\u043a\u0430\u0443\u043d\u0442"),r.a.createElement("form",{onSubmit:this.onSubmit},r.a.createElement("div",{className:"form-group"},r.a.createElement("input",{type:"text",className:Q()("form-control form-control-lg",{"is-invalid":e.fullName}),placeholder:"\u0418\u043c\u044f",name:"fullName",value:this.state.fullName,onChange:this.onChange}),e.fullName&&r.a.createElement("div",{className:"invalid-feedback"},e.fullName)),r.a.createElement("div",{className:"form-group"},r.a.createElement("input",{type:"text",className:Q()("form-control form-control-lg",{"is-invalid":e.username}),placeholder:"\u041b\u043e\u0433\u0438\u043d",name:"username",value:this.state.username,onChange:this.onChange}),e.username&&r.a.createElement("div",{className:"invalid-feedback"},e.username)),r.a.createElement("div",{className:"form-group"},r.a.createElement("input",{type:"password",className:Q()("form-control form-control-lg",{"is-invalid":e.password}),placeholder:"\u041f\u0430\u0440\u043e\u043b\u044c",name:"password",value:this.state.password,onChange:this.onChange}),e.password&&r.a.createElement("div",{className:"invalid-feedback"},e.password)),r.a.createElement("div",{className:"form-group"},r.a.createElement("input",{type:"password",className:Q()("form-control form-control-lg",{"is-invalid":e.confirmPassword}),placeholder:"\u041f\u043e\u0434\u0442\u0432\u0435\u0440\u0436\u0434\u0435\u043d\u0438\u0435 \u043f\u0430\u0440\u043e\u043b\u044f",name:"confirmPassword",value:this.state.confirmPassword,onChange:this.onChange}),e.confirmPassword&&r.a.createElement("div",{className:"invalid-feedback"},e.confirmPassword)),r.a.createElement("div",{className:"form-group"},r.a.createElement("select",{className:"form-control form-control-lg",name:"role",value:this.state.role,onChange:this.onChange},r.a.createElement("option",{value:"USER"},"\u041c\u043e\u043d\u0442\u0430\u0436\u043d\u0438\u043a"),r.a.createElement("option",{value:"ADMIN"},"\u0414\u0438\u0441\u043f\u0435\u0442\u0447\u0435\u0440"),r.a.createElement("option",{value:"OWNER"},"\u0410\u0434\u043c\u0438\u043d\u0438\u0441\u0442\u0440\u0430\u0442\u043e\u0440"))),r.a.createElement("input",{type:"submit",className:"btn btn-info btn-block mt-4"}))))))}}]),t}(n.Component),Z=Object(p.b)(function(e){return{errors:e.errors,security:e.security}},{createNewUser:function(e,t){return function(){var a=Object(v.a)(f.a.mark(function a(n){return f.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,b.a.post("/api/users/register",e);case 3:n({type:"GET_ERRORS",payload:{}}),t.push("/settings"),a.next=10;break;case 7:a.prev=7,a.t0=a.catch(0),n({type:"GET_ERRORS",payload:a.t0.response.data});case 10:case"end":return a.stop()}},a,null,[[0,7]])}));return function(e){return a.apply(this,arguments)}}()}})($),ee=function(e){function t(){var e;return Object(l.a)(this,t),(e=Object(i.a)(this,Object(u.a)(t).call(this))).state={username:"",password:"",errors:{}},e.onChange=e.onChange.bind(Object(q.a)(e)),e.onSubmit=e.onSubmit.bind(Object(q.a)(e)),e}return Object(m.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){this.props.security.validToken&&this.props.history.push("/dashboard")}},{key:"componentWillReceiveProps",value:function(e){e.security.validToken&&this.props.history.push("/dashboard"),e.errors&&this.setState({errors:e.errors})}},{key:"onSubmit",value:function(e){e.preventDefault();var t={username:this.state.username,password:this.state.password};this.props.login(t)}},{key:"onChange",value:function(e){if(this.state.errors[e.target.name]){var t=Object(_.a)({},this.state.errors);t[e.target.name]="",this.setState({errors:t})}this.setState(Object(z.a)({},e.target.name,e.target.value))}},{key:"render",value:function(){var e=this.state.errors;return r.a.createElement("div",{className:"login"},r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-md-8 m-auto"},r.a.createElement("h1",{className:"display-4 text-center"},"\u0414\u043e\u0431\u0440\u043e \u043f\u043e\u0436\u0430\u043b\u043e\u0432\u0430\u0442\u044c!"),r.a.createElement("form",{onSubmit:this.onSubmit},r.a.createElement("div",{className:"form-group"},r.a.createElement("input",{type:"text",className:Q()("form-control form-control-lg",{"is-invalid":e.username}),placeholder:"\u041b\u043e\u0433\u0438\u043d",name:"username",value:this.state.username,onChange:this.onChange}),e.username&&r.a.createElement("div",{className:"invalid-feedback"},e.username)),r.a.createElement("div",{className:"form-group"},r.a.createElement("input",{type:"password",className:Q()("form-control form-control-lg",{"is-invalid":e.password}),placeholder:"\u041f\u0430\u0440\u043e\u043b\u044c",name:"password",value:this.state.password,onChange:this.onChange}),e.password&&r.a.createElement("div",{className:"invalid-feedback"},e.password)),r.a.createElement("input",{type:"submit",className:"btn btn-info btn-block mt-4"}))))))}}]),t}(n.Component),te=Object(p.b)(function(e){return{security:e.security,errors:e.errors}},{login:function(e){return function(){var t=Object(v.a)(f.a.mark(function t(a){var n,r,s;return f.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,b.a.post("/api/users/login",e);case 3:n=t.sent,r=n.data.token,localStorage.setItem("jwtToken",r),g.setJWTToken(r),s=N()(r),a({type:"SET_CURRENT_USER",payload:s}),t.next=14;break;case 11:t.prev=11,t.t0=t.catch(0),a({type:"GET_ERRORS",payload:t.t0.response.data});case 14:case"end":return t.stop()}},t,null,[[0,11]])}));return function(e){return t.apply(this,arguments)}}()}})(ee),ae=a(39),ne=a(87),re=a(240),se=function(){return r.a.createElement(re.a,{animation:"border",variant:"primary"})},oe=function(e){return function(){var t=Object(v.a)(f.a.mark(function t(a){var n,r;return f.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n=e?"?role="+e:"",t.next=3,b.a.get("/api/users"+n);case 3:return r=t.sent,a({type:"GET_USERS",payload:r.data}),t.abrupt("return",r.data);case 6:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}()},le=function(e){return function(){var t=Object(v.a)(f.a.mark(function t(a){var n;return f.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,b.a.delete("/api/users/"+e.id);case 2:return n=t.sent,a({type:"REMOVE_USER",payload:e}),t.abrupt("return",n.data);case 5:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}()},ce=function(){return function(){var e=Object(v.a)(f.a.mark(function e(t){var a;return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b.a.get("/api/breakdowns");case 2:return a=e.sent,t({type:"GET_BREAKDOWN_TYPES",payload:a.data}),e.abrupt("return",a.data);case 5:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()},ie=function(e){return function(){var t=Object(v.a)(f.a.mark(function t(a){var n;return f.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,b.a.delete("/api/breakdowns/"+e.id);case 2:return n=t.sent,a({type:"REMOVE_BREAKDOWN_TYPE",payload:e}),t.abrupt("return",n.data);case 5:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}()},ue=function(e){return function(){var t=Object(v.a)(f.a.mark(function t(a){var n;return f.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,b.a.post("/api/breakdowns",{type:e});case 2:n=t.sent,a({type:"ADD_BREAKDOWN_TYPE",payload:n.data});case 4:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}()},me=function(e){return function(){var t=Object(v.a)(f.a.mark(function t(a){return f.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,b.a.put("/api/breakdowns",e);case 2:a({type:"EDIT_BREAKDOWN_TYPE",payload:e});case 3:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}()},de=function(){return function(){var e=Object(v.a)(f.a.mark(function e(t){var a;return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b.a.get("/api/areas");case 2:a=e.sent,t({type:"GET_AREAS",payload:a.data});case 4:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()},pe=function(e){return function(){var t=Object(v.a)(f.a.mark(function t(a){var n;return f.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,b.a.delete("/api/areas/"+e.id);case 2:return n=t.sent,a({type:"REMOVE_AREA",payload:e}),t.abrupt("return",n.data);case 5:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}()},he=function(e){return function(){var t=Object(v.a)(f.a.mark(function t(a){var n;return f.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,b.a.post("/api/areas",{caption:e});case 2:n=t.sent,a({type:"ADD_AREA",payload:n.data});case 4:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}()},fe=function(e){return function(){var t=Object(v.a)(f.a.mark(function t(a){return f.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,b.a.put("/api/areas",e);case 2:a({type:"EDIT_AREA",payload:e});case 3:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}()},ve=a(246),Ee=a(247),be=a(241),ge=a(138),ye=a(251),Ne=function(e){var t=e.type,a=e.onClick,s=e.errors,o=e.itemField,l=Object(ae.a)(e,["type","onClick","errors","itemField"]),c=Object(n.useState)(null),i=Object(ne.a)(c,2),u=i[0],m=i[1];return r.a.createElement(ve.a,Object.assign({},l,{size:"lg","aria-labelledby":"contained-modal-title-vcenter",centered:!0}),r.a.createElement(ve.a.Header,{closeButton:!0},r.a.createElement(ve.a.Title,{id:"contained-modal-title-vcenter"},"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u043d\u043e\u0432\u044b\u0439 ",t)),r.a.createElement(ve.a.Body,null,r.a.createElement(Ee.a,{onSubmit:function(e){e.preventDefault(),a(u),l.onHide()}},r.a.createElement(be.a,{className:"mb-3"},r.a.createElement(ge.a,{className:s[o]&&"is-invalid",onChange:function(e){return m(e.target.value)},required:!0,placeholder:t}),s[o]&&r.a.createElement("div",{className:"invalid-feedback"},s[o]),r.a.createElement(be.a.Append,null,r.a.createElement(ye.a,{type:"submit",variant:"primary"},"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c"))))))},ke=function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(i.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={inputValue:""},a.setInputValue=function(e){a.setState({inputValue:e.target.value})},a.getParamName=function(){var e=a.props.type;return"\u0440\u0430\u0439\u043e\u043d"===e?"caption":"\u0442\u0438\u043f \u043f\u043e\u043b\u043e\u043c\u043a\u0438"===e?"type":null},a.onButtonClick=function(e){var t=a.props,n=t.editItem,r=t.onHide;e.preventDefault(),n[a.getParamName()]=a.state.inputValue,a.props.onClick(n),r()},a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e=this.props.editItem,t=this.getParamName();e&&this.setState({inputValue:e[t]})}},{key:"render",value:function(){var e=this.props,t=e.type,a=(e.onClick,e.editItem),n=Object(ae.a)(e,["type","onClick","editItem"]),s=this.getParamName(),o="";return a&&(o=a[s]),r.a.createElement(ve.a,Object.assign({},n,{size:"lg","aria-labelledby":"contained-modal-title-vcenter",centered:!0}),r.a.createElement(ve.a.Header,{closeButton:!0},r.a.createElement(ve.a.Title,{id:"contained-modal-title-vcenter"},"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c ",t)),r.a.createElement(ve.a.Body,null,r.a.createElement(Ee.a,{onSubmit:this.onButtonClick},r.a.createElement(be.a,{className:"mb-3"},r.a.createElement(ge.a,{defaultValue:o,onChange:this.setInputValue,required:!0,placeholder:t}),r.a.createElement(be.a.Append,null,r.a.createElement(ye.a,{type:"submit",variant:"primary"},"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c"))))))}}]),t}(r.a.Component),Oe=function(e,t){var a=function(a){function n(){var e,t;Object(l.a)(this,n);for(var a=arguments.length,r=new Array(a),s=0;s<a;s++)r[s]=arguments[s];return(t=Object(i.a)(this,(e=Object(u.a)(n)).call.apply(e,[this].concat(r)))).state={showAddModal:!1,showEditModal:!1,editItem:null},t.toggleAddModal=function(){return t.setState({showAddModal:!t.state.showAddModal})},t.toggleEditModal=function(e){e.username?w.push("/settings/editUser/".concat(e.id)):t.setState({showEditModal:!t.state.showEditModal,editItem:e})},t}return Object(m.a)(n,a),Object(c.a)(n,[{key:"componentDidMount",value:function(){(0,this.update().getData)()}},{key:"update",value:function(){var e,a,n,s,o,l,c,i=this.props,u=i.getAreas,m=i.editArea,p=i.editBreakdownType,h=i.errors,f=i.getBreakdownTypes,v=i.getUsers,E=i.area,b=i.breakdownType,g=i.addArea,y=i.addBreakdownType,N=i.users,k=i.removeArea,O=i.removeBreakdownType,w=i.removeUser,T=this.state,C=T.showAddModal,j=T.showEditModal,S=T.editItem;switch(t){case"\u0421\u043e\u0442\u0440\u0443\u0434\u043d\u0438\u043a\u0438":a=v,e=N,n=w,s="fullName",l=r.a.createElement(d.a,{to:"/settings/addUser",className:"btn btn-primary btn-lg btn-block"},"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0441\u043e\u0442\u0440\u0443\u0434\u043d\u0438\u043a\u0430");break;case"\u0420\u0430\u0439\u043e\u043d\u044b":a=u,e=E,n=k,s="caption",o=r.a.createElement(Ne,{errors:h,itemField:s,onClick:g,show:C,onHide:this.toggleAddModal,type:"\u0440\u0430\u0439\u043e\u043d"}),c=r.a.createElement(ke,{errors:h,itemField:s,editItem:S,onClick:m,show:j,onHide:this.toggleEditModal,type:"\u0440\u0430\u0439\u043e\u043d"}),l=r.a.createElement(ye.a,{block:!0,size:"lg",onClick:this.toggleAddModal,variant:"primary"},"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0440\u0430\u0439\u043e\u043d");break;case"\u0422\u0438\u043f\u044b \u043f\u043e\u043b\u043e\u043c\u043e\u043a":a=f,e=b,n=O,s="type",o=r.a.createElement(Ne,{errors:h,itemField:s,show:C,onClick:y,onHide:this.toggleAddModal,type:"\u0442\u0438\u043f \u043f\u043e\u043b\u043e\u043c\u043a\u0438"}),c=r.a.createElement(ke,{errors:h,itemField:s,editItem:S,onClick:p,show:j,onHide:this.toggleEditModal,type:"\u0442\u0438\u043f \u043f\u043e\u043b\u043e\u043c\u043a\u0438"}),l=r.a.createElement(ye.a,{block:!0,size:"lg",onClick:this.toggleAddModal,variant:"primary"},"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0442\u0438\u043f \u043f\u043e\u043b\u043e\u043c\u043a\u0438");break;default:return null}return{data:e,getData:a,onDelete:n,itemField:s,addModal:o,button:l,editModal:c}}},{key:"render",value:function(){var t=this.update(),a=t.data,n=t.onDelete,s=t.itemField,o=t.addModal,l=t.button,c=t.editModal;return a.length?r.a.createElement(r.a.Fragment,null,r.a.createElement(e,Object.assign({},this.props,{onDelete:n,data:a,itemField:s,onClick:this.toggleEditModal})),l,o,c):r.a.createElement(se,null)}}]),n}(r.a.Component);return Object(p.b)(function(e){return{users:e.users,breakdownType:e.breakdownType,area:e.area,errors:e.errors}},{getUsers:oe,getAreas:de,getBreakdownTypes:ce,removeUser:le,removeArea:pe,removeBreakdownType:ie,addArea:he,addBreakdownType:ue,editBreakdownType:me,editArea:fe})(a)},we=a(242),Te=a(243),Ce=a(139),je=a(248),Se=function(e){var t=e.item,a=e.onDelete,n=e.onClick,s=e.itemField;return r.a.createElement(je.a.Item,{action:!0,onClick:function(){return n(t)}},r.a.createElement("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"}},t[s],r.a.createElement("i",{className:"fa fa-ban",style:{color:"red"},"aria-hidden":"true",onClick:function(e){return e.stopPropagation()|a(t)}})))},Re=function(e){var t=e.data,a=Object(ae.a)(e,["data"]);return r.a.createElement(je.a,{as:"ul"},t.map(function(e){return r.a.createElement(Se,Object.assign({key:e.id,item:e},a))}))},De=function(){var e=["\u0421\u043e\u0442\u0440\u0443\u0434\u043d\u0438\u043a\u0438","\u0422\u0438\u043f\u044b \u043f\u043e\u043b\u043e\u043c\u043e\u043a","\u0420\u0430\u0439\u043e\u043d\u044b"],t=Object(n.useState)(e[0]),a=Object(ne.a)(t,2),s=a[0],o=a[1],l=Oe(Re,s);return r.a.createElement("div",{className:"projects"},r.a.createElement(we.a,null,r.a.createElement(Te.a,null,r.a.createElement(Ce.a,{xs:6},r.a.createElement("h4",{className:"d-flex justify-content-between align-items-center mb-3"},r.a.createElement("span",{className:"text-muted"},"\u041d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0438")),r.a.createElement(xe,{titles:e,active:s,onClick:o})),r.a.createElement(Ce.a,{xs:6},r.a.createElement("h4",{className:"d-flex justify-content-between align-items-center mb-3"},r.a.createElement("span",{className:"text-muted"},s)),r.a.createElement(l,null)))))},xe=function(e){var t=e.titles,a=Object(ae.a)(e,["titles"]);return r.a.createElement(je.a,{as:"ul"},t.map(function(e,t){return r.a.createElement(Ae,Object.assign({key:t,name:e},a))}))},Ae=function(e){var t=e.name,a=e.active,n=e.onClick;return r.a.createElement(je.a.Item,{as:"li",active:a===t,onClick:function(){return n(t)}},t)},_e=a(249),Ue=Object(p.b)(function(e){return{security:e.security}})(function(e){var t=e.component,a=e.security,n=Object(ae.a)(e,["component","security"]);return r.a.createElement(S.a,Object.assign({},n,{render:function(e){return!0===a.validToken?r.a.createElement(t,e):r.a.createElement(_e.a,{to:"/login"})}}))}),Me=function(e){return function(){var t=Object(v.a)(f.a.mark(function t(a){var n;return f.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,b.a.get("/api/task?closed="+e);case 2:n=t.sent,console.log("test");try{a({type:"GET_TASK_LIST",payload:n.data})}catch(r){a({type:"GET_ERRORS",payload:r.response.data})}case 5:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}()},Pe=function(e){return function(){var t=Object(v.a)(f.a.mark(function t(a){return f.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,b.a.put("/api/task",e);case 2:try{a({type:"UPDATE_TASK",payload:e})}catch(n){a({type:"GET_ERRORS",payload:n.response.data})}case 3:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}()},Ie=function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(i.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).getUserName=function(e){return e.map(function(t,a){var n=t.fullName;return e.length>1&&a!==e.length-1&&(n+=", "),n})},a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"onCloseClick",value:function(e){e.closed=!e.closed,this.props.updateTask(e)}},{key:"render",value:function(){var e,t=this.props.task,a=this.props.task.customer.address,n=a.flatNumber,s=a.street,o=a.house;return 1===t.priority&&(e="bg-danger text-light"),2===t.priority&&(e="bg-warning text-light"),3===t.priority&&(e="bg-info text-light"),r.a.createElement("div",{className:"card mb-1 bg-light"},r.a.createElement("div",{className:"card-header text-primary ".concat(e)},this.getUserName(t.users)),r.a.createElement("div",{className:"card-body bg-light"},r.a.createElement("p",{className:"card-text",style:{marginBottom:0}},s," ",o&&"\u0434.".concat(o)," ",n&&"\u043a\u0432.".concat(n)),r.a.createElement("hr",null),r.a.createElement("p",null,t.breakdownType.map(function(e){var t=e.type,a=e.id;return r.a.createElement("p",{style:{marginBottom:0},key:a,className:"card-text text-truncate "},t)})),r.a.createElement(d.a,{to:"/updateTask/".concat(t.id),className:"btn btn-primary"},"\u041f\u043e\u0441\u043c\u043e\u0442\u0440\u0435\u0442\u044c"),r.a.createElement("button",{className:"btn btn-danger ml-4",onClick:this.onCloseClick.bind(this,t)},t.closed?"\u041e\u0442\u043a\u0440\u044b\u0442\u044c":"\u0417\u0430\u043a\u0440\u044b\u0442\u044c")))}}]),t}(n.Component),Be=Object(p.b)(null,{updateTask:Pe})(Ie),We=function(e){function t(){return Object(l.a)(this,t),Object(i.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){for(var e=this.props.data.filter(function(e){return!e.closed}).map(function(e){return r.a.createElement(Be,{key:e.id,task:e})}),t=[],a=[],n=[],s=0;s<e.length;s++)"TO_DO"===e[s].props.task.status&&t.push(e[s]),"IN_PROGRESS"===e[s].props.task.status&&a.push(e[s]),"DONE"===e[s].props.task.status&&n.push(e[s]);return r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-md-4"},r.a.createElement("div",{className:"card text-center mb-2"},r.a.createElement("div",{className:"card-header bg-secondary text-white"},r.a.createElement("h3",null,"\u0412 \u043e\u0436\u0438\u0434\u0430\u043d\u0438\u0435"))),t),r.a.createElement("div",{className:"col-md-4"},r.a.createElement("div",{className:"card text-center mb-2"},r.a.createElement("div",{className:"card-header bg-primary text-white"},r.a.createElement("h3",null,"\u0412 \u0440\u0430\u0431\u043e\u0442\u0435"))),a),r.a.createElement("div",{className:"col-md-4"},r.a.createElement("div",{className:"card text-center mb-2"},r.a.createElement("div",{className:"card-header bg-success text-white"},r.a.createElement("h3",null,"\u0413\u043e\u0442\u043e\u0432\u043e"))),n)))}}]),t}(n.Component),Ge=function(e){function t(){var e;return Object(l.a)(this,t),(e=Object(i.a)(this,Object(u.a)(t).call(this))).state={errors:{}},e}return Object(m.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){this.props.getTaskList(!1)}},{key:"componentWillReceiveProps",value:function(e){e.errors&&this.setState({errors:e.errors})}},{key:"render",value:function(){var e,t=this.props.tasks;e=function(e,t){return t.length<1?e.projectNotFound?r.a.createElement("div",{className:"alert alert-danger text-center",role:"alert"},e.projectNotFound):e.projectIdentifier?r.a.createElement("div",{className:"alert alert-danger text-center",role:"alert"},e.projectIdentifier):r.a.createElement("div",{className:"alert alert-info text-center",role:"alert"},"\u0421\u043f\u0438\u0441\u043e\u043a \u043f\u043e\u043a\u0430 \u043f\u0443\u0441\u0442"):r.a.createElement(We,{data:t})}(this.state.errors,t);var a=this.props.security.user;return r.a.createElement("div",{className:"container"},"USER"!==a.role&&r.a.createElement(n.Fragment,null,r.a.createElement(d.a,{to:"/addTask",className:"btn btn-primary mb-3",style:{marginRight:"20px"}},r.a.createElement("i",{className:"fas fa-plus-circle"}," \u0421\u043e\u0437\u0434\u0430\u0442\u044c \u0437\u0430\u044f\u0432\u043a\u0443 ")),r.a.createElement(d.a,{to:"/report",className:"btn btn-primary mb-3"},r.a.createElement("i",{className:"fas fa-plus-circle"}," \u0421\u0444\u043e\u0440\u043c\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u043e\u0442\u0447\u0435\u0442 ")),r.a.createElement("br",null),r.a.createElement("hr",null)),e)}}]),t}(n.Component),Fe=Object(p.b)(function(e){return{tasks:e.tasks,errors:e.errors,security:e.security}},{getTaskList:Me})(Ge),Le=a(49),Ke=a(53),Ve=(a(65),a(54)),He=a.n(Ve),Je=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(i.a)(this,Object(u.a)(t).call(this,e))).handleChangeBreakdown=function(e){a.setState({breakdownType:e})},a.handleChangeUsers=function(e){a.setState({users:e})},a.convertOptionToArea=function(e){var t=a.props.area;if(e){var n=t.find(function(t){return t.id===parseInt(e,10)});if(n)return n}},a.convertOptionToBreakdown=function(e){var t=a.props.breakdownType,n=[];return e.forEach(function(e){var a=t.find(function(t){return t.id===e.value});a&&n.push(a)}),n},a.convertOptionToUsers=function(e){var t=a.props.users,n=[];return e.forEach(function(e){var a=t.find(function(t){return t.id===e.value});a&&n.push(a)}),n},a.breakdownToOptions=function(e){return e.map(function(e){return{value:e.id,label:e.type}})},a.userToOptions=function(e){return e.filter(function(e){return"USER"===e.role}).map(function(e){return{value:e.id,label:e.fullName}})},a.getCustomer=function(){var e=a.state,t=e.flatNumber,n=e.street,r=e.fullName,s=e.house;return{fullName:r,phone:e.phone,address:{flatNumber:t,street:n,house:s}}},a.toggleCalendar=function(e){e&&e.preventDefault(),a.setState({isOpen:!a.state.isOpen})},a.formatDate=function(e){var t=e.getDate(),a=e.getMonth(),n=e.getFullYear();return t+" "+["\u042f\u043d\u0432\u0430\u0440\u044c","\u0424\u0435\u0432\u0430\u0440\u043b\u044c","\u041c\u0430\u0440\u0442","\u0410\u043f\u0440\u0435\u043b\u044c","\u041c\u0430\u0439","\u0418\u044e\u043d\u044c","\u0418\u044e\u043b\u044c","\u0410\u0432\u0433\u0443\u0441\u0442","\u0421\u0435\u043d\u0442\u044f\u0431\u0440\u044c","\u041e\u043a\u0442\u044f\u0431\u0440\u044c","\u041d\u043e\u044f\u0431\u0440\u044c","\u0414\u0435\u043a\u0430\u0431\u0440\u044c"][a]+" "+n},a.handleChangeDate=function(e){a.setState({dueDate:e}),a.toggleCalendar()},a.state={status:"",priority:0,dueDate:new Date,breakdownType:[],area:{},flatNumber:"",street:"",fullName:"",house:"",phone:"",users:[],errors:{},isOpen:!1},a.onChange=a.onChange.bind(Object(q.a)(a)),a.onSubmit=a.onSubmit.bind(Object(q.a)(a)),a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e=this.props,t=e.getBreakdownTypes,a=e.getAreas,n=e.getUsers;t(),a(),n("USER")}},{key:"componentWillReceiveProps",value:function(e){e.errors&&this.setState({errors:e.errors})}},{key:"onChange",value:function(e){this.setState(Object(z.a)({},e.target.name,e.target.value))}},{key:"onSubmit",value:function(e){e.preventDefault();var t={breakdownType:this.convertOptionToBreakdown(this.state.breakdownType),area:this.convertOptionToArea(this.state.area),status:this.state.status,priority:this.state.priority,dueDate:this.state.dueDate,customer:this.getCustomer(),users:this.convertOptionToUsers(this.state.users)};this.props.addTask(t,this.props.history)}},{key:"render",value:function(){var e=this.props,t=e.breakdownType,a=e.area,n=e.users;return r.a.createElement("div",{className:"add-PBI"},r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-md-8 m-auto"},r.a.createElement(d.a,{to:"/dashboard",className:"btn btn-light"},"\u041d\u0430\u0437\u0430\u0434 \u043a \u0437\u0430\u044f\u0432\u043a\u0430\u043c"),r.a.createElement("h4",{className:"display-4 text-center"},"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0437\u0430\u044f\u0432\u043a\u0443"),r.a.createElement("form",{onSubmit:this.onSubmit,className:"needs-validation"},r.a.createElement("div",{className:"form-group"},r.a.createElement(Le.a,{placeholder:"\u0422\u0438\u043f \u043f\u043e\u043b\u043e\u043c\u043a\u0438",value:this.state.breakdownType,onChange:this.handleChangeBreakdown,options:this.breakdownToOptions(t),isMulti:!0,required:!0})),r.a.createElement("div",{className:"form-group"},r.a.createElement(Le.a,{placeholder:"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u043c\u0430\u0441\u0442\u0435\u0440\u0430",value:this.state.users,onChange:this.handleChangeUsers,options:this.userToOptions(n),isMulti:!0,required:!0})),r.a.createElement("div",{className:"form-group"},r.a.createElement("input",{type:"text",className:"form-control form-control-sm",placeholder:"\u0424\u0418\u041e \u0437\u0430\u043a\u0430\u0437\u0447\u0438\u043a\u0430",name:"fullName",value:this.state.fullName,onChange:this.onChange})),r.a.createElement("div",{className:"form-group"},r.a.createElement("div",{className:"form-row"},r.a.createElement("div",{className:"col-md-6"},r.a.createElement("input",{type:"text",className:"form-control form-control-sm",placeholder:"\u0423\u043b\u0438\u0446\u044b",name:"street",value:this.state.street,onChange:this.onChange,required:!0})),r.a.createElement("div",{className:"col-md-3"},r.a.createElement("input",{type:"text",className:"form-control form-control-sm",placeholder:"\u0414\u043e\u043c",name:"house",value:this.state.house,onChange:this.onChange,required:!0})),r.a.createElement("div",{className:"col-md-3"},r.a.createElement("input",{type:"text",className:"form-control form-control-sm",placeholder:"\u041a\u0432\u0430\u0440\u0442\u0438\u0440\u0430",name:"flatNumber",value:this.state.flatNumber,onChange:this.onChange})))),r.a.createElement("div",{className:"form-group"},r.a.createElement("input",{type:"text",className:"form-control form-control-sm",placeholder:"\u041a\u043e\u043d\u0442\u0430\u043a\u0442\u043d\u044b\u0439 \u0442\u0435\u043b\u0435\u0444\u043e\u043d",name:"phone",value:this.state.phone,onChange:this.onChange,required:!0})),r.a.createElement("div",{className:"form-group"},r.a.createElement("select",{className:"form-control form-control-sm",name:"area",value:this.state.area,onChange:this.onChange},r.a.createElement("option",{value:0},"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0440\u0430\u0439\u043e\u043d"),a.map(function(e){return r.a.createElement("option",{key:e.id,value:e.id},e.caption)}))),r.a.createElement("div",{className:"form-group"},r.a.createElement("select",{className:"form-control form-control-sm",name:"priority",value:this.state.priority,onChange:this.onChange},r.a.createElement("option",{value:0},"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u043f\u0440\u0438\u043e\u0440\u0438\u0442\u0435\u0442"),r.a.createElement("option",{value:1},"\u0412\u044b\u0441\u043e\u043a\u0438\u0439"),r.a.createElement("option",{value:2},"\u0421\u0440\u0435\u0434\u043d\u0438\u0439"),r.a.createElement("option",{value:3},"\u041d\u0438\u0437\u043a\u0438\u0439"))),r.a.createElement("div",{className:"form-group"},r.a.createElement("select",{className:"form-control form-control-sm",name:"status",value:this.state.status,onChange:this.onChange},r.a.createElement("option",{value:""},"\u0421\u0442\u0430\u0442\u0443\u0441"),r.a.createElement("option",{value:"TO_DO"},"\u0412 \u043e\u0436\u0438\u0434\u0430\u043d\u0438\u0435"),r.a.createElement("option",{value:"IN_PROGRESS"},"\u0412 \u0440\u0430\u0431\u043e\u0442\u0435"),r.a.createElement("option",{value:"DONE"},"\u0413\u043e\u0442\u043e\u0432\u043e"))),r.a.createElement("h6",null,"\u0421\u0440\u043e\u043a \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f"),r.a.createElement("div",{className:"form-group"},r.a.createElement(ye.a,{block:!0,variant:"outline-secondary",onClick:this.toggleCalendar},this.formatDate(this.state.dueDate)),this.state.isOpen&&r.a.createElement(Ke.a,{selected:this.state.dueDate,onChange:this.handleChangeDate,dateFormat:"dd-MM-yyyy",locale:He.a,withPortal:!0,inline:!0,onClickOutside:this.toggleCalendar})),r.a.createElement("input",{type:"submit",value:"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c",className:"btn btn-primary btn-block mt-4"}))))))}}]),t}(n.PureComponent),Ye=Object(p.b)(function(e){return{errors:e.errors,breakdownType:e.breakdownType,area:e.area,users:e.users}},{addTask:function(e,t){return function(){var a=Object(v.a)(f.a.mark(function a(n){var r;return f.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,b.a.post("/api/task",e);case 2:r=a.sent;try{n({type:"ADD_TASK",payload:r.data}),t.push("/dashboard")}catch(s){n({type:"GET_ERRORS",payload:s.response.data})}case 4:case"end":return a.stop()}},a)}));return function(e){return a.apply(this,arguments)}}()},getBreakdownTypes:ce,getAreas:de,getUsers:oe})(Je),ze=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(i.a)(this,Object(u.a)(t).call(this,e))).handleChangeBreakdown=function(e){a.setState({breakdownType:e})},a.handleChangeUsers=function(e){a.setState({users:e})},a.convertOptionToBreakdown=function(e){var t=a.props.breakdownType,n=[];return e.forEach(function(e){var a=t.find(function(t){return t.id===e.value});a&&n.push(a)}),n},a.convertOptionToUsers=function(e){var t=a.props.users,n=[];return e.forEach(function(e){var a=t.find(function(t){return t.id===e.value});a&&n.push(a)}),n},a.breakdownToOptions=function(e){return e.map(function(e){return{value:e.id,label:e.type}})},a.userToOptions=function(e){return e.filter(function(e){return"USER"===e.role}).map(function(e){return{value:e.id,label:e.fullName}})},a.getCustomer=function(){var e=a.state,t=e.flatNumber,n=e.street,r=e.fullName,s=e.house,o=e.phone;return{id:e.customerId,fullName:r,phone:o,address:{id:e.addressId,flatNumber:t,street:n,house:s}}},a.toggleCalendar=function(e){e&&e.preventDefault(),a.setState({isOpen:!a.state.isOpen})},a.formatDate=function(e){var t=e.getDate(),a=e.getMonth(),n=e.getFullYear();return t+" "+["\u042f\u043d\u0432\u0430\u0440\u044c","\u0424\u0435\u0432\u0430\u0440\u043b\u044c","\u041c\u0430\u0440\u0442","\u0410\u043f\u0440\u0435\u043b\u044c","\u041c\u0430\u0439","\u0418\u044e\u043d\u044c","\u0418\u044e\u043b\u044c","\u0410\u0432\u0433\u0443\u0441\u0442","\u0421\u0435\u043d\u0442\u044f\u0431\u0440\u044c","\u041e\u043a\u0442\u044f\u0431\u0440\u044c","\u041d\u043e\u044f\u0431\u0440\u044c","\u0414\u0435\u043a\u0430\u0431\u0440\u044c"][a]+" "+n},a.handleChangeDate=function(e){a.setState({dueDate:e}),a.toggleCalendar()},a.state={status:"",priority:0,dueDate:new Date,breakdownType:[],area:{},flatNumber:"",street:"",fullName:"",addressId:"",house:"",phone:"",users:[],errors:{},isOpen:!1},a.onChange=a.onChange.bind(Object(q.a)(a)),a.onSubmit=a.onSubmit.bind(Object(q.a)(a)),a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e=this.props,t=e.getBreakdownTypes,a=e.getAreas,n=e.getUsers,r=this.props.match.params.id;this.props.getTask(r),t(),a(),n()}},{key:"componentWillReceiveProps",value:function(e){var t=this;if(e.errors&&this.setState({errors:e.errors}),e.tasks&&e.tasks.length>0){var a=e.tasks.find(function(e){return e.id===parseInt(t.props.match.params.id,10)}),n=a.id,r=a.area,s=a.breakdownType,o=a.status,l=a.priority,c=a.dueDate,i=a.customer,u=i.fullName,m=i.phone,d=i.address,p=a.createAt,h=a.users;this.setState({id:n,area:r,breakdownType:this.breakdownToOptions(s),status:o,priority:l,dueDate:new Date(c),fullName:u,phone:m,house:d.house,flatNumber:d.flatNumber,addressId:d.id,street:d.street,createAt:p,users:this.userToOptions(h),customerId:a.customer.id})}}},{key:"onChange",value:function(e){this.setState(Object(z.a)({},e.target.name,e.target.value))}},{key:"onSubmit",value:function(e){e.preventDefault();var t={breakdownType:this.convertOptionToBreakdown(this.state.breakdownType),area:this.state.area,status:this.state.status,priority:this.state.priority,dueDate:this.state.dueDate,customer:this.getCustomer(),users:this.convertOptionToUsers(this.state.users),id:this.state.id};this.props.updateTask(t)}},{key:"render",value:function(){var e=this.props,t=e.breakdownType,a=e.area,n=e.users;return r.a.createElement("div",{className:"add-PBI"},r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-md-8 m-auto"},r.a.createElement(d.a,{to:"/dashboard",className:"btn btn-light"},"\u041d\u0430\u0437\u0430\u0434 \u043a \u0437\u0430\u044f\u0432\u043a\u0430\u043c"),r.a.createElement("h4",{className:"display-4 text-center"},"\u0418\u0437\u043c\u0435\u043d\u0438\u0442\u044c \u0437\u0430\u044f\u0432\u043a\u0443"),r.a.createElement("form",{onSubmit:this.onSubmit},r.a.createElement("div",{className:"form-group"},r.a.createElement(Le.a,{placeholder:"\u0422\u0438\u043f \u043f\u043e\u043b\u043e\u043c\u043a\u0438",value:this.state.breakdownType,onChange:this.handleChangeBreakdown,options:this.breakdownToOptions(t),isMulti:!0})),r.a.createElement("div",{className:"form-group"},r.a.createElement(Le.a,{placeholder:"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u043c\u0430\u0441\u0442\u0435\u0440\u0430",value:this.state.users,onChange:this.handleChangeUsers,options:this.userToOptions(n),isMulti:!0})),r.a.createElement("div",{className:"form-group"},r.a.createElement("input",{type:"text",className:"form-control form-control-sm",placeholder:"\u0424\u0418\u041e \u0437\u0430\u043a\u0430\u0437\u0447\u0438\u043a\u0430",name:"fullName",value:this.state.fullName,onChange:this.onChange})),r.a.createElement("div",{className:"form-group"},r.a.createElement("div",{className:"form-row"},r.a.createElement("div",{className:"col-md-6"},r.a.createElement("input",{type:"text",className:"form-control form-control-sm",placeholder:"\u0423\u043b\u0438\u0446\u044b",name:"street",value:this.state.street,onChange:this.onChange})),r.a.createElement("div",{className:"col-md-3"},r.a.createElement("input",{type:"text",className:"form-control form-control-sm",placeholder:"\u0414\u043e\u043c",name:"house",value:this.state.house,onChange:this.onChange})),r.a.createElement("div",{className:"col-md-3"},r.a.createElement("input",{type:"text",className:"form-control form-control-sm",placeholder:"\u041a\u0432\u0430\u0440\u0442\u0438\u0440\u0430",name:"flatNumber",value:this.state.flatNumber,onChange:this.onChange})))),r.a.createElement("div",{className:"form-group"},r.a.createElement("input",{type:"text",className:"form-control form-control-sm",placeholder:"\u041a\u043e\u043d\u0442\u0430\u043a\u0442\u043d\u044b\u0439 \u0442\u0435\u043b\u0435\u0444\u043e\u043d",name:"phone",value:this.state.phone,onChange:this.onChange})),r.a.createElement("div",{className:"form-group"},r.a.createElement("select",{className:"form-control form-control-sm",name:"area",value:this.state.area.id,onChange:this.onChange},r.a.createElement("option",{value:0},"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0440\u0430\u0439\u043e\u043d"),a.map(function(e){return r.a.createElement("option",{key:e.id,value:e.id},e.caption)}))),r.a.createElement("div",{className:"form-group"},r.a.createElement("select",{className:"form-control form-control-sm",name:"priority",value:this.state.priority,onChange:this.onChange},r.a.createElement("option",{value:0},"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u043f\u0440\u0438\u043e\u0440\u0438\u0442\u0435\u0442"),r.a.createElement("option",{value:1},"\u0412\u044b\u0441\u043e\u043a\u0438\u0439"),r.a.createElement("option",{value:2},"\u0421\u0440\u0435\u0434\u043d\u0438\u0439"),r.a.createElement("option",{value:3},"\u041d\u0438\u0437\u043a\u0438\u0439"))),r.a.createElement("div",{className:"form-group"},r.a.createElement("select",{className:"form-control form-control-sm",name:"status",value:this.state.status,onChange:this.onChange},r.a.createElement("option",{value:""},"\u0421\u0442\u0430\u0442\u0443\u0441"),r.a.createElement("option",{value:"TO_DO"},"\u0412 \u043e\u0436\u0438\u0434\u0430\u043d\u0438\u0435"),r.a.createElement("option",{value:"IN_PROGRESS"},"\u0412 \u0440\u0430\u0431\u043e\u0442\u0435"),r.a.createElement("option",{value:"DONE"},"\u0413\u043e\u0442\u043e\u0432\u043e"))),r.a.createElement("h6",null,"\u0421\u0440\u043e\u043a \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f"),r.a.createElement("div",{className:"form-group"},r.a.createElement(ye.a,{block:!0,variant:"outline-secondary",onClick:this.toggleCalendar},this.formatDate(this.state.dueDate)),this.state.isOpen&&r.a.createElement(Ke.a,{selected:this.state.dueDate,onChange:this.handleChangeDate,dateFormat:"dd-MM-yyyy",locale:He.a,withPortal:!0,inline:!0,onClickOutside:this.toggleCalendar})),r.a.createElement("input",{type:"submit",value:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c",className:"btn btn-primary btn-block mt-4"}))))))}}]),t}(n.Component),qe=Object(p.b)(function(e){return{errors:e.errors,breakdownType:e.breakdownType,area:e.area,users:e.users,tasks:e.tasks}},{updateTask:Pe,getBreakdownTypes:ce,getAreas:de,getUsers:oe,getTask:function(e){return function(){var t=Object(v.a)(f.a.mark(function t(a){var n;return f.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,b.a.get("/api/task/"+e);case 2:n=t.sent;try{a({type:"GET_TASK",payload:n.data})}catch(r){a({type:"GET_ERRORS",payload:r.response.data})}case 4:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}()}})(ze),Xe=function(e){function t(){var e;return Object(l.a)(this,t),(e=Object(i.a)(this,Object(u.a)(t).call(this))).state={username:"",fullName:"",role:"USER",id:0,password:"",confirmPassword:"",errors:{}},e.onChange=e.onChange.bind(Object(q.a)(e)),e.onSubmit=e.onSubmit.bind(Object(q.a)(e)),e}return Object(m.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){this.props.getUsers()}},{key:"componentWillReceiveProps",value:function(e){var t=this.props.match;if(e.errors&&this.setState({errors:e.errors}),e.users){var a=e.users.find(function(e){return e.id===parseInt(t.params.id,10)}),n=a.username,r=a.fullName,s=a.id,o=a.role;this.setState({username:n,fullName:r,id:s,role:o})}}},{key:"onSubmit",value:function(e){e.preventDefault();var t={id:this.state.id,username:this.state.username,fullName:this.state.fullName,password:this.state.password,confirmPassword:this.state.confirmPassword,role:this.state.role};this.props.editUser(t)}},{key:"onChange",value:function(e){if(this.state.errors[e.target.name]){var t=Object(_.a)({},this.state.errors);t[e.target.name]="",this.setState({errors:t})}this.setState(Object(z.a)({},e.target.name,e.target.value))}},{key:"render",value:function(){var e=this.state.errors;return r.a.createElement("div",{className:"register"},r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-md-8 m-auto"},r.a.createElement(d.a,{to:"/settings",className:"btn btn-light"},"\u041d\u0430\u0437\u0430\u0434 \u043a \u043d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0430\u043c"),r.a.createElement("h1",{className:"display-4 text-center"},"\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f"),r.a.createElement("p",{className:"lead text-center"},"\u0421\u043e\u0437\u0434\u0430\u0442\u044c \u0430\u043a\u043a\u0430\u0443\u043d\u0442"),r.a.createElement("form",{onSubmit:this.onSubmit},r.a.createElement("div",{className:"form-group"},r.a.createElement("input",{type:"text",className:Q()("form-control form-control-lg",{"is-invalid":e.fullName}),placeholder:"\u0418\u043c\u044f",name:"fullName",value:this.state.fullName,onChange:this.onChange}),e.fullName&&r.a.createElement("div",{className:"invalid-feedback"},e.fullName)),r.a.createElement("div",{className:"form-group"},r.a.createElement("input",{type:"text",className:Q()("form-control form-control-lg",{"is-invalid":e.username}),placeholder:"\u041b\u043e\u0433\u0438\u043d",name:"username",value:this.state.username,onChange:this.onChange}),e.username&&r.a.createElement("div",{className:"invalid-feedback"},e.username)),r.a.createElement("div",{className:"form-group"},r.a.createElement("input",{type:"password",className:Q()("form-control form-control-lg",{"is-invalid":e.password}),placeholder:"\u041f\u0430\u0440\u043e\u043b\u044c",name:"password",value:this.state.password,onChange:this.onChange}),e.password&&r.a.createElement("div",{className:"invalid-feedback"},e.password)),r.a.createElement("div",{className:"form-group"},r.a.createElement("input",{type:"password",className:Q()("form-control form-control-lg",{"is-invalid":e.confirmPassword}),placeholder:"\u041f\u043e\u0434\u0442\u0432\u0435\u0440\u0436\u0434\u0435\u043d\u0438\u0435 \u043f\u0430\u0440\u043e\u043b\u044f",name:"confirmPassword",value:this.state.confirmPassword,onChange:this.onChange}),e.confirmPassword&&r.a.createElement("div",{className:"invalid-feedback"},e.confirmPassword)),r.a.createElement("div",{className:"form-group"},r.a.createElement("select",{className:"form-control form-control-lg",name:"role",value:this.state.role,onChange:this.onChange},r.a.createElement("option",{value:"USER"},"\u041c\u043e\u043d\u0442\u0430\u0436\u043d\u0438\u043a"),r.a.createElement("option",{value:"ADMIN"},"\u0414\u0438\u0441\u043f\u0435\u0442\u0447\u0435\u0440"),r.a.createElement("option",{value:"OWNER"},"\u0410\u0434\u043c\u0438\u043d\u0438\u0441\u0442\u0440\u0430\u0442\u043e\u0440"))),r.a.createElement("input",{type:"submit",className:"btn btn-info btn-block mt-4"}))))))}}]),t}(n.Component),Qe=Object(p.b)(function(e){return{errors:e.errors,users:e.users}},{editUser:function(e){return function(){var t=Object(v.a)(f.a.mark(function t(a){return f.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,b.a.put("/api/users",e);case 3:a({type:"EDIT_USER",payload:e}),t.next=9;break;case 6:t.prev=6,t.t0=t.catch(0),a({type:"GET_ERRORS",payload:t.t0.response.data});case 9:case"end":return t.stop()}},t,null,[[0,6]])}));return function(e){return t.apply(this,arguments)}}()},getUsers:oe})(Xe),$e=function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(i.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).getStartDate=function(){var e=new Date;return e.setMonth(e.getMonth()-1),e},a.state={start:a.getStartDate(),end:new Date,breakdownType:[],user:null,status:"",isOpenStart:!1,isOpenEnd:!1},a.handleChangeBreakdown=function(e){a.setState({breakdownType:e})},a.handleChangeUsers=function(e){a.setState({user:e})},a.onChange=function(e){a.setState(Object(z.a)({},e.target.name,e.target.value))},a.breakdownToOptions=function(e){var t=e.map(function(e){return{value:e.id,label:e.type}});return t.unshift({value:0,label:"\u0432\u0441\u0435 \u043f\u043e\u043b\u043e\u043c\u043a\u0438"}),t},a.userToOptions=function(e){return e.filter(function(e){return"USER"===e.role}).map(function(e){return{value:e.id,label:e.fullName}})},a.handleChangeStartDate=function(e){a.setState({start:e}),a.toggleCalendarStart()},a.handleChangeEndDate=function(e){a.setState({end:e}),a.toggleCalendarEnd()},a.toggleCalendarStart=function(e){e&&e.preventDefault(),a.setState({isOpenStart:!a.state.isOpenStart})},a.toggleCalendarEnd=function(e){e&&e.preventDefault(),a.setState({isOpenEnd:!a.state.isOpenEnd})},a.formatDate=function(e){var t=e.getDate(),a=e.getMonth(),n=e.getFullYear();return t+" "+["\u042f\u043d\u0432\u0430\u0440\u044c","\u0424\u0435\u0432\u0430\u0440\u043b\u044c","\u041c\u0430\u0440\u0442","\u0410\u043f\u0440\u0435\u043b\u044c","\u041c\u0430\u0439","\u0418\u044e\u043d\u044c","\u0418\u044e\u043b\u044c","\u0410\u0432\u0433\u0443\u0441\u0442","\u0421\u0435\u043d\u0442\u044f\u0431\u0440\u044c","\u041e\u043a\u0442\u044f\u0431\u0440\u044c","\u041d\u043e\u044f\u0431\u0440\u044c","\u0414\u0435\u043a\u0430\u0431\u0440\u044c"][a]+" "+n},a.convertOptionToUsers=function(e){var t=a.props.users,n=[];return e.forEach(function(e){var a=t.find(function(t){return t.id===e.value});if(a)return n.push(a.id)}),n},a.convertOptionToBreakdown=function(e){var t=a.props.breakdownType,n=[];return e.forEach(function(e){if(0!==e.value){var a=t.find(function(t){return t.id===e.value});a&&n.push(a.id)}else n.push(e.value)}),n},a.onSubmit=function(e){e.preventDefault();var t={breakdownType:a.convertOptionToBreakdown(a.state.breakdownType),status:a.state.status,start:a.state.start,end:a.state.end,users:a.convertOptionToUsers(a.state.user)};w.push("/report/"+btoa(JSON.stringify(t)))},a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e=this.props,t=e.getBreakdownTypes,a=e.getUsers,n=e.users,r=e.breakdownType;0===n.length&&a("USER"),0===r.length&&t()}},{key:"componentWillReceiveProps",value:function(e){e.errors&&this.setState({errors:e.errors})}},{key:"render",value:function(){var e=this.props,t=e.breakdownType,a=e.users;return r.a.createElement("div",{className:"add-PBI"},r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-md-8 m-auto"},r.a.createElement(d.a,{to:"/dashboard",className:"btn btn-light",style:{marginRight:"10px"}},"\u041d\u0430\u0437\u0430\u0434 \u043a \u0437\u0430\u044f\u0432\u043a\u0430\u043c"),r.a.createElement(d.a,{to:"/adresses",className:"btn btn-light"},"\u0410\u0434\u0440\u0435\u0441\u0430 \u0436\u0438\u0442\u0435\u043b\u0435\u0439"),r.a.createElement("h4",{className:"display-4 text-center"},"\u0421\u043e\u0437\u0434\u0430\u043d\u0438\u0435 \u043e\u0442\u0447\u0435\u0442\u0430"),r.a.createElement(Ee.a,{onSubmit:this.onSubmit},r.a.createElement(Ee.a.Group,{as:Te.a,controlId:"formHorizontalEmail"},r.a.createElement(Ee.a.Label,{column:!0,sm:2},"\u041d\u0430\u0447\u0430\u043b\u043e"),r.a.createElement(Ce.a,{sm:10},r.a.createElement(ye.a,{block:!0,variant:"outline-secondary",onClick:this.toggleCalendarStart},this.formatDate(this.state.start)))),this.state.isOpenStart&&r.a.createElement(Ke.a,{selected:this.state.start,onChange:this.handleChangeStartDate,dateFormat:"dd-MM-yyyy",locale:He.a,withPortal:!0,inline:!0,onClickOutside:this.toggleCalendarStart}),r.a.createElement(Ee.a.Group,{as:Te.a,controlId:"formHorizontalEmail"},r.a.createElement(Ee.a.Label,{column:!0,sm:2},"\u041a\u043e\u043d\u0435\u0446"),r.a.createElement(Ce.a,{sm:10},r.a.createElement(ye.a,{block:!0,variant:"outline-secondary",onClick:this.toggleCalendarEnd},this.formatDate(this.state.end)))),this.state.isOpenEnd&&r.a.createElement(Ke.a,{selected:this.state.end,onChange:this.handleChangeEndDate,dateFormat:"dd-MM-yyyy",locale:He.a,withPortal:!0,inline:!0,onClickOutside:this.toggleCalendarEnd}),r.a.createElement("div",{className:"form-group"},r.a.createElement(Le.a,{placeholder:"\u0422\u0438\u043f \u043f\u043e\u043b\u043e\u043c\u043a\u0438",value:this.state.breakdownType,onChange:this.handleChangeBreakdown,options:this.breakdownToOptions(t),isMulti:!0})),r.a.createElement("div",{className:"form-group"},r.a.createElement(Le.a,{placeholder:"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u043c\u0430\u0441\u0442\u0435\u0440\u0430",value:this.state.users,onChange:this.handleChangeUsers,options:this.userToOptions(a),isMulti:!0})),r.a.createElement("div",{className:"form-group"},r.a.createElement("select",{className:"form-control form-control-sm",name:"status",value:this.state.status,onChange:this.onChange},r.a.createElement("option",{value:""},"\u0421\u0442\u0430\u0442\u0443\u0441"),r.a.createElement("option",{value:"ALL"},"\u0412\u0441\u0435"),r.a.createElement("option",{value:"TO_DO"},"\u0412 \u043e\u0436\u0438\u0434\u0430\u043d\u0438\u0435"),r.a.createElement("option",{value:"IN_PROGRESS"},"\u0412 \u0440\u0430\u0431\u043e\u0442\u0435"),r.a.createElement("option",{value:"DONE"},"\u0413\u043e\u0442\u043e\u0432\u043e"))),r.a.createElement("input",{type:"submit",value:"\u0421\u0444\u043e\u0440\u043c\u0438\u0440\u043e\u0432\u0430\u0442\u044c",className:"btn btn-primary btn-block mt-4"}))))))}}]),t}(n.Component),Ze=Object(p.b)(function(e){return{errors:e.errors,breakdownType:e.breakdownType,users:e.users}},{getUsers:oe,getBreakdownTypes:ce})($e),et={URL:"https://secure-refuge-10466.herokuapp.com/"},tt=a(244),at=a(245),nt=function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(i.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={report:null},a.statusConverter=function(e){switch(e){case"TO_DO":return"\u0412 \u043e\u0436\u0438\u0434\u0430\u043d\u0438\u0435";case"IN_PROGRESS":return"\u0412 \u0440\u0430\u0431\u043e\u0442\u0435";case"DONE":return"\u0413\u043e\u0442\u043e\u0432\u043e";default:return""}},a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e=this.props,t=e.match,a=e.getReports;if(t.params.reportId){var n=JSON.parse(atob(t.params.reportId));this.setState({report:n}),a(n)}else w.push("/report")}},{key:"render",value:function(){var e=this,t=this.props.reports;return r.a.createElement(we.a,null,t.map(function(t){var a=t.breakdownType,n=t.createAt,s=t.id,o=t.users,l=t.customer,c=t.status,i=l.address,u=i.street,m=i.house,d=i.flatNumber;return r.a.createElement("div",{key:s},r.a.createElement(tt.a,{bordered:!0,striped:!0,responsive:"md"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",{align:"center",colSpan:2},"\u041c\u0430\u0441\u0442\u0435\u0440:  ",o.map(function(e,t){var a=e.fullName;return o.length>1&&t!==o.length-1&&(a+=", "),a})))),r.a.createElement("tbody",null,r.a.createElement("tr",null,r.a.createElement("td",null,"\u0414\u0430\u0442\u0430 \u0441\u043e\u0437\u0434\u0430\u043d\u0438\u044f"),r.a.createElement("td",null,n)),r.a.createElement("tr",null,r.a.createElement("td",null,"\u0422\u0438\u043f\u044b \u043f\u043e\u043b\u043e\u043c\u043e\u043a"),r.a.createElement("td",null,a.map(function(e){return e.type}).join(", "))),r.a.createElement("tr",null,r.a.createElement("td",null,"\u0424\u0418\u041e \u0437\u0430\u043a\u0430\u0437\u0447\u0438\u043a\u0430"),r.a.createElement("td",null,l.fullName)),r.a.createElement("tr",null,r.a.createElement("td",null,"\u0422\u0435\u043b\u0435\u0444\u043e\u043d"),r.a.createElement("td",null,l.phone)),r.a.createElement("tr",null,r.a.createElement("td",null,"\u0410\u0434\u0440\u0435\u0441"),r.a.createElement("td",null,u," ",m," ",d)),r.a.createElement("tr",null,r.a.createElement("td",null,"\u0421\u0442\u0430\u0442\u0443\u0441"),r.a.createElement("td",null,e.statusConverter(c))))))}),r.a.createElement("div",{style:{marginTop:"15px"}},0!==t.length&&r.a.createElement(ye.a,{type:"submit",variant:"primary",style:{marginRight:"15px"},onClick:function(){e.props.downloadReports(e.props.match.params.reportId)}},"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c \u0432 Word"),r.a.createElement(ye.a,{variant:"secondary",disabled:!0},"\u0412\u0441\u0435\u0433\u043e \u043a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e: ",r.a.createElement(at.a,{variant:"light"},t.length))))}}]),t}(n.Component),rt=Object(p.b)(function(e){return{errors:e.errors,reports:e.reports}},{getReports:function(e){return function(){var t=Object(v.a)(f.a.mark(function t(a){var n;return f.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,b.a.post("/api/report",e);case 2:n=t.sent,a({type:"GET_REPORT",payload:n.data});case 4:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}()},downloadReports:function(e){return function(){var t=Object(v.a)(f.a.mark(function t(a){var n;return f.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:(n=document.createElement("a")).download="download",n.href="".concat(et.URL,"/api/report/").concat(e),n.click();case 4:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}()}})(nt),st=function(e){function t(){return Object(l.a)(this,t),Object(i.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){this.props.getTaskList(!0)}},{key:"componentWillReceiveProps",value:function(e){e.errors&&this.setState({errors:e.errors})}},{key:"render",value:function(){var e=this.props.tasks;return r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-md-8 m-auto"},r.a.createElement(d.a,{to:"/dashboard",className:"btn btn-light"},"\u041d\u0430\u0437\u0430\u0434 \u043a \u0437\u0430\u044f\u0432\u043a\u0430\u043c"),r.a.createElement("h4",{className:"display-4 text-center"},"\u0417\u0430\u043a\u0440\u044b\u0442\u044b\u0435 \u0437\u0430\u044f\u0432\u043a\u0438"),e.filter(function(e){return e.closed}).map(function(e){return r.a.createElement(Ce.a,null,r.a.createElement(Be,{key:e.id,task:e}))}))))}}]),t}(n.Component),ot=Object(p.b)(function(e){return{tasks:e.tasks,errors:e.errors}},{getTaskList:Me})(st),lt=function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(i.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={address:[]},a.fetchData=function(){return b.a.get("/api/address")},a.downloadResult=function(){var e=document.createElement("a");e.download="download",e.href="".concat(et.URL,"/api/address/download"),e.click()},a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.fetchData().then(function(t){e.setState({address:t.data})})}},{key:"render",value:function(){var e=this,t=this.state.address;return r.a.createElement(we.a,null,r.a.createElement(tt.a,{bordered:!0,striped:!0,responsive:"md"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"id"),r.a.createElement("th",null,"\u0424\u0418\u041e"),r.a.createElement("th",null,"\u0410\u0434\u0440\u0435\u0441"))),r.a.createElement("tbody",null,t.length&&t.map(function(e,t){var a=e.street,n=e.house,s=e.flatNumber,o=e.fullName;return r.a.createElement("tr",{key:t},r.a.createElement("td",null,t+1),r.a.createElement("td",null,o),r.a.createElement("td",null,a," ",n," ",s))}))),r.a.createElement("div",{style:{marginTop:"15px"}},0!==t.length&&r.a.createElement(ye.a,{type:"submit",variant:"primary",style:{marginRight:"15px"},onClick:function(){e.downloadResult()}},"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c \u0432 Word"),r.a.createElement(ye.a,{variant:"secondary",disabled:!0},"\u0412\u0441\u0435\u0433\u043e \u043a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e: ",r.a.createElement(at.a,{variant:"light"},t.length))))}}]),t}(n.Component);b.a.defaults.baseURL=et.URL;var ct=localStorage.jwtToken;if(console.log("jwtToken",ct),ct){console.log("if (jwtToken)"),g.setJWTToken(ct);var it=N()(ct);H.dispatch({type:"SET_CURRENT_USER",payload:it});var ut=Date.now()/1e3;it.exp<ut&&(H.dispatch(k()),w.push("/"))}var mt=function(e){function t(){return Object(l.a)(this,t),Object(i.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return r.a.createElement(p.a,{store:H},r.a.createElement(j.a,{history:w},r.a.createElement("div",{className:"App"},r.a.createElement(C,null),r.a.createElement(S.a,{exact:!0,path:"/",component:Y}),r.a.createElement(S.a,{exact:!0,path:"/login",component:te}),r.a.createElement(R.a,null,r.a.createElement(Ue,{exact:!0,path:"/dashboard",component:Fe}),r.a.createElement(Ue,{exact:!0,path:"/dashboard/closed",component:ot}),r.a.createElement(Ue,{exact:!0,path:"/settings",component:De}),r.a.createElement(Ue,{exact:!0,path:"/settings/addUser",component:Z}),r.a.createElement(Ue,{exact:!0,path:"/settings/editUser/:id",component:Qe}),r.a.createElement(Ue,{exact:!0,path:"/report",component:Ze}),r.a.createElement(Ue,{exact:!0,path:"/report/:reportId",component:rt}),r.a.createElement(Ue,{exact:!0,path:"/addTask",component:Ye}),r.a.createElement(Ue,{exact:!0,path:"/updateTask/:id",component:qe}),r.a.createElement(Ue,{exact:!0,path:"/adresses",component:lt})))))}}]),t}(n.Component),dt=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function pt(e){navigator.serviceWorker.register(e).then(function(e){e.onupdatefound=function(){var t=e.installing;t.onstatechange=function(){"installed"===t.state&&(navigator.serviceWorker.controller?console.log("New content is available; please refresh."):console.log("Content is cached for offline use."))}}}).catch(function(e){console.error("Error during service worker registration:",e)})}o.a.render(r.a.createElement(mt,null),document.getElementById("root")),function(){if("serviceWorker"in navigator){if(new URL("/antenna12",window.location).origin!==window.location.origin)return;window.addEventListener("load",function(){var e="".concat("/antenna12","/service-worker.js");dt?(function(e){fetch(e).then(function(t){404===t.status||-1===t.headers.get("content-type").indexOf("javascript")?navigator.serviceWorker.ready.then(function(e){e.unregister().then(function(){window.location.reload()})}):pt(e)}).catch(function(){console.log("No internet connection found. App is running in offline mode.")})}(e),navigator.serviceWorker.ready.then(function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://goo.gl/SC7cgQ")})):pt(e)})}}()}},[[163,1,2]]]);
//# sourceMappingURL=main.4421a600.chunk.js.map